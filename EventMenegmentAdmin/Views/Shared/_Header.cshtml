@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@using System.Security.Claims

<!-- Navbar -->
<nav class="flex items-center justify-between p-4 bg-gradient-to-r from-gray-800 via-gray-900 to-gray-800 shadow-lg">
    <!-- Logo -->
    <a href="#">
        <img style="height:10px; width:15px;" src="@Url.Content("~/images/EventX.png")" />
    </a>

    <!-- Menü -->
    <div class="hidden md:flex items-center justify-between w-full px-8">
        <!-- Ortada yerləşən menyu linkləri -->
        <div class="flex-1 flex justify-center space-x-8">
            <a asp-controller="Home" asp-action="Index" class="text-gray-300 hover:text-purple-400 transition" style="text-decoration:none">Anasayfa</a>
            <a asp-controller="Events" asp-action="Index" class="text-gray-300 hover:text-purple-400 transition" style="text-decoration:none">Tədbirlər</a>
            <a href="#" class="text-gray-300 hover:text-purple-400 transition" style="text-decoration:none">Təşkilatçılar</a>
            <a asp-controller="Location" asp-action="Index" class="text-gray-300 hover:text-purple-400 transition" style="text-decoration:none">Məkanlar</a>
        </div>

        <!-- Sağda yerləşən dropdown menyu -->
        <div class="relative group" style="margin-right:20px">
            <button class="text-gray-300 hover:text-purple-400 transition focus:outline-none">
                <span class="flex items-center gap-1">
                    @{
                        var userName = HttpContextAccessor.HttpContext.Request.Cookies["UserName"];
                    }

                    @if (!string.IsNullOrEmpty(userName))
                    {
                        <span class="text-gray-300">Salam, @userName</span>

                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>

                        <div style="margin-top:130px" class="absolute right-0 w-48 bg-gray-800 rounded-md shadow-lg hidden group-hover:block z-50">
                            @if (User?.Identity?.IsAuthenticated ?? false)
                            {
                                var userId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;
                                <a asp-controller="Inivitiation" asp-action="Index" asp-route-userId="@userId" class="block px-4 py-2 text-sm text-gray-300 hover:bg-purple-600 hover:text-white" style="text-decoration:none">Dəvətlər</a>
                            }

                            <a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-purple-600 hover:text-white" style="text-decoration:none">Check-in</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-purple-600 hover:text-white" style="text-decoration:none">Bildirişlər</a>
                        </div>
                    }
                    else
                    {
                        <span class="text-gray-300">
                            <a class="btn btn-light btn-sm" style="text-decoration:none ; margin-left:30px;" asp-controller="Account" asp-action="SignIn">Sign In</a>
                        </span>
                    }
                </span>
            </button>
        </div>

        @if (User.Identity.IsAuthenticated)
        {
            <form asp-controller="Account" asp-action="Logout" method="post" class="form-inline">
                <button type="submit" class="btn btn-primary btn-sm">Çıxış</button>
            </form>
        }
    </div>

    <!-- Mobil Menü İkonu -->
    <button class="md:hidden text-gray-300 hover:text-purple-400">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
    </button>
</nav>

<!-- Anime.js Animasyon -->
<script>
    // Logo animasyonu
    anime({
        targets: '.logo',
        scale: [0.8, 1],
        opacity: [0, 1],
        duration: 1200,
        easing: 'easeOutExpo'
    });

    // Menü linkleri animasyonu
    anime({
        targets: '.menu-links a',
        opacity: [0, 1],
        translateY: [-20, 0],
        delay: anime.stagger(150, { start: 500 }),
        duration: 800,
        easing: 'easeOutExpo'
    });
</script>
